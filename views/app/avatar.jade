mixin avatarMeters
  .hero-stats
    .meter.health(title="Health")
      .bar(style='width: {{Shared.percent(user.stats.hp, 50)}}%;')
      span.meter-text
        span.glyphicon.glyphicon-heart
        |  {{Math.ceil(user.stats.hp)}} / 50
    .meter.experience(title="Experience")
      .bar(style='width: {{Shared.percent(user.stats.exp,Shared.tnl(user.stats.lvl))}}%;')
      span.meter-text
        span.glyphicon.glyphicon-star
        |  {{Math.floor(user.stats.exp) | number:0}} / {{Shared.tnl(user.stats.lvl) | number:0}}
    //-.meter.mana(title='Mana', ng-if='user.flags.classSelected && !user.preferences.disableClasses')
      .bar(style='width: {{user.stats.mp / user._statsComputed.maxMP * 100}}%;')
      span.meter-text
        span.glyphicon.glyphicon-fire
        |  {{Math.floor(user.stats.mp)}} / {{user._statsComputed.maxMP}}

  //- ORIGINAL.
    .meter.animate
      span.meter-width(style="width:{{user.stats.hp/50*100}}%")
        span
    .meter.animate.orange
      span.meter-width(style="width:{{user.stats.exp / Shared.tnl(user.stats.lvl) * 100}}%")
        span

mixin avatarSprites
  span(class='skin_{{user.preferences.skin}}')
  span(class='{{user.preferences.size}}_shirt_{{user.preferences.shirt}}')
  span(class='{{user.preferences.size}}_{{user.items.gear.equipped.armor}}',ng-if='!user.preferences.costume')
  span(class='{{user.preferences.size}}_{{user.items.gear.costume.armor}}',ng-if='user.preferences.costume')
  span(class='head_0')
  span(class='hair_base_{{user.preferences.hair.base}}_{{user.preferences.hair.color}}')
  span(class='hair_bangs_{{user.preferences.hair.bangs}}_{{user.preferences.hair.color}}')
  span(class='hair_beard_{{user.preferences.hair.beard}}_{{user.preferences.hair.color}}')
  span(class='hair_mustache_{{user.preferences.hair.mustache}}_{{user.preferences.hair.color}}')
  span(class='{{user.items.gear.equipped.head}}' ng-if='!user.preferences.costume')
  span(class='{{user.items.gear.costume.head}}' ng-if='user.preferences.costume')
  span(class='{{user.items.gear.equipped.shield}}' ng-if='!user.preferences.costume')
  span(class='{{user.items.gear.costume.shield}}' ng-if='user.preferences.costume')
  span(class='{{user.items.gear.equipped.weapon}}' ng-if='!user.preferences.costume')
  span(class='{{user.items.gear.costume.weapon}}' ng-if='user.preferences.costume')
  span(ng-class='{zzz:user.preferences.sleep}')
  span(class='current-pet Pet-{{user.items.currentPet}}' ng-show='user.items.currentPet')

mixin avatar
  div
    figure.herobox(style='top: -24px; left: -43px;')
      .character-sprites(ng-click='$state.go("/app/profile")')
        +avatarSprites()
    .large-meters
      +avatarMeters()